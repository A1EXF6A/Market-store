pipeline {
    agent none

    stages {
        // --- STAGE 0: Checkout del Código y Verificación ---
        stage('Checkout y Verificación') {
            agent any
            steps {
                // 1. Descarga el código del repositorio
                echo 'Descargando el código del repositorio...'
                checkout scm 
                
                // 2. Lista los contenidos del directorio de trabajo para verificar
                echo 'Listando directorios y archivos en el workspace:'
                sh 'ls -F' 
            }
        }
        
        // --- STAGE 1: levantar front ---
        stage('levantar front') { 
            // Usaremos 'Frontend' y 'Backend' con mayúsculas, asumiendo que el 'ls -F' lo confirmará.
            agent {  
                dockerfile {
                    dir 'Frontend' 
                }
            }
            steps {
                echo 'Iniciando Frontend...'
            }
        }
        
        // --- STAGE 2: levantar back ---
        stage('levantar back') { 
            agent {  
                dockerfile {
                    dir 'Backend' 
                }
            }
            steps {
                echo 'Iniciando Backend...'
            }
        }
    }
}
